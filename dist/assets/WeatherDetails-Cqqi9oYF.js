import{d as _,u as S,r as L,o as x,c as l,a as e,b as U,w as M,t as u,e as y,f as g,g as B,h as E,i as o,_ as C,j as Q,F as k,k as V,l as W,m as D,n as F}from"./index-B0P0wbej.js";const R="data:image/svg+xml,%3csvg%20width='9'%20height='12'%20viewBox='0%200%209%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.787964%205.99999L6.79796%2012.01L8.21196%2010.596L3.61196%205.99599L8.21196%201.39599L6.79796%20-0.0100098L0.787964%205.99999Z'%20fill='white'/%3e%3c/svg%3e",O="data:image/svg+xml,%3csvg%20width='15'%20height='14'%20viewBox='0%200%2015%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.5%206.33334H8.16665V1.00001C8.16665%200.823199%208.09641%200.65363%207.97138%200.528606C7.84636%200.403581%207.67679%200.333344%207.49998%200.333344C7.32317%200.333344%207.1536%200.403581%207.02858%200.528606C6.90355%200.65363%206.83331%200.823199%206.83331%201.00001V6.33334H1.49998C1.32317%206.33334%201.1536%206.40358%201.02858%206.52861C0.903551%206.65363%200.833313%206.8232%200.833313%207.00001C0.833313%207.17682%200.903551%207.34639%201.02858%207.47141C1.1536%207.59644%201.32317%207.66668%201.49998%207.66668H6.83331V13C6.83331%2013.1768%206.90355%2013.3464%207.02858%2013.4714C7.1536%2013.5964%207.32317%2013.6667%207.49998%2013.6667C7.67679%2013.6667%207.84636%2013.5964%207.97138%2013.4714C8.09641%2013.3464%208.16665%2013.1768%208.16665%2013V7.66668H13.5C13.6768%207.66668%2013.8464%207.59644%2013.9714%207.47141C14.0964%207.34639%2014.1666%207.17682%2014.1666%207.00001C14.1666%206.8232%2014.0964%206.65363%2013.9714%206.52861C13.8464%206.40358%2013.6768%206.33334%2013.5%206.33334Z'%20fill='white'/%3e%3c/svg%3e",T="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13%203.00001H10.3333V2.33334C10.3328%201.80309%2010.1219%201.29472%209.74691%200.919769C9.37196%200.544822%208.86359%200.333922%208.33333%200.333344H5.66666C5.13641%200.333922%204.62804%200.544822%204.25309%200.919769C3.87814%201.29472%203.66724%201.80309%203.66667%202.33334V3.00001H0.999999C0.823188%203.00001%200.653618%203.07025%200.528594%203.19527C0.40357%203.3203%200.333332%203.48987%200.333332%203.66668C0.333332%203.84349%200.40357%204.01306%200.528594%204.13808C0.653618%204.26311%200.823188%204.33334%200.999999%204.33334H1.66667V10.3333C1.6677%2011.2171%202.01923%2012.0643%202.64412%2012.6892C3.26902%2013.3141%204.11626%2013.6656%205%2013.6667H9C9.88373%2013.6656%2010.731%2013.3141%2011.3559%2012.6892C11.9808%2012.0643%2012.3323%2011.2171%2012.3333%2010.3333V4.33334H13C13.1768%204.33334%2013.3464%204.26311%2013.4714%204.13808C13.5964%204.01306%2013.6667%203.84349%2013.6667%203.66668C13.6667%203.48987%2013.5964%203.3203%2013.4714%203.19527C13.3464%203.07025%2013.1768%203.00001%2013%203.00001ZM5%202.33334C5.00012%202.15657%205.07039%201.98707%205.19539%201.86207C5.32039%201.73707%205.48989%201.6668%205.66666%201.66668H8.33333C8.51011%201.6668%208.6796%201.73707%208.8046%201.86207C8.9296%201.98707%208.99988%202.15657%209%202.33334V3.00001H5V2.33334ZM11%2010.3333C10.9994%2010.8636%2010.7885%2011.372%2010.4136%2011.7469C10.0386%2012.1219%209.53025%2012.3328%209%2012.3333H5C4.46974%2012.3328%203.96137%2012.1219%203.58642%2011.7469C3.21148%2011.372%203.00058%2010.8636%203%2010.3333V4.33334H11V10.3333ZM5.66666%2011C5.75423%2011.0001%205.84094%2010.9829%205.92185%2010.9494C6.00275%2010.9159%206.07626%2010.8668%206.13818%2010.8049C6.2001%2010.7429%206.2492%2010.6694%206.28269%2010.5885C6.31617%2010.5076%206.33338%2010.4209%206.33333%2010.3333V6.33334C6.33333%206.15653%206.26309%205.98696%206.13807%205.86194C6.01305%205.73691%205.84348%205.66668%205.66666%205.66668C5.48985%205.66668%205.32028%205.73691%205.19526%205.86194C5.07024%205.98696%205%206.15653%205%206.33334V10.3333C4.99995%2010.4209%205.01716%2010.5076%205.05064%2010.5885C5.08413%2010.6694%205.13323%2010.7429%205.19515%2010.8049C5.25706%2010.8668%205.33058%2010.9159%205.41148%2010.9494C5.49239%2010.9829%205.5791%2011.0001%205.66666%2011ZM8.33333%2011C8.42089%2011.0001%208.50761%2010.9829%208.58851%2010.9494C8.66942%2010.9159%208.74293%2010.8668%208.80485%2010.8049C8.86676%2010.7429%208.91587%2010.6694%208.94935%2010.5885C8.98284%2010.5076%209.00005%2010.4209%209%2010.3333V6.33334C9%206.15653%208.92976%205.98696%208.80474%205.86194C8.67971%205.73691%208.51014%205.66668%208.33333%205.66668C8.15652%205.66668%207.98695%205.73691%207.86193%205.86194C7.7369%205.98696%207.66667%206.15653%207.66667%206.33334V10.3333C7.66661%2010.4209%207.68382%2010.5076%207.71731%2010.5885C7.75079%2010.6694%207.7999%2010.7429%207.86181%2010.8049C7.92373%2010.8668%207.99724%2010.9159%208.07815%2010.9494C8.15906%2010.9829%208.24577%2011.0001%208.33333%2011Z'%20fill='white'/%3e%3c/svg%3e",b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC2SURBVHgBxVJBDcMwDEykAQiEMtgYrAxWBg2UMhiEQJiGICqDMegYbAw8Z7pWVhOn/fUkK7LPds5OjDkaViOIqOHjAvdlrX0LzrH/VQvZIuUI4Aa2vlY8wa7pJsQ9Yh80Uxs8kOgK3F2o6bXbE24FbliNszQ4ibz/wng5z1VxUjOxeREeSwo8umfyd0GM0FZyuvQatSaxskQHLmypmJ+xE4WtiDdmxyiBcsRS8dZXPsMd1a97OH6xmwA21Kz9BAAAAABJRU5ErkJggg==",Y={key:0,class:"main"},Z={class:"highlight"},I={class:"nav"},X={class:"name"},q={key:1,style:{width:"0.875rem"},alt:"Add"},z={class:"main-date"},N={class:"icon"},j=["src"],G={class:"temperature"},K={class:"current-temperature"},J={class:"current-weather"},P={class:"last-update"},e0=_({__name:"WeatherSection",props:{weatherData:{}},setup(m){const i=S(),n=B(),r=n.query.lat,t=n.query.long,a=n.query.name,h=n.query.current,d=L(!1);function c(){d.value=i.list.some(s=>{const A=typeof s.latitude=="string"?parseFloat(s.latitude):s.latitude,f=typeof s.longitude=="string"?parseFloat(s.longitude):s.longitude,H=typeof r=="string"?parseFloat(r):r,$=typeof t=="string"?parseFloat(t):t;return A===H&&f===$})}function p(){const s={longitude:t,latitude:r,name:a};h&&(s.current=!0),i.addList(s),d.value=!0}function v(){i.removeList(t,r),d.value=!1,h&&i.removeCurrentLocationCard()}function w(){window.location.reload()}return x(()=>{c()}),(s,A)=>{const f=E("RouterLink");return s.weatherData?(o(),l("section",Y,[e("div",Z,[e("div",I,[U(f,{to:"/"},{default:M(()=>A[0]||(A[0]=[e("img",{src:R,alt:"Left"},null,-1)])),_:1}),e("div",X,u(y(a)),1),!d.value&&!y(h)?(o(),l("img",{key:0,onClick:p,src:O,alt:"Add"})):!d.value&&y(h)?(o(),l("span",q)):g("",!0),d.value?(o(),l("img",{key:2,onClick:v,src:T,alt:"Delete"})):g("",!0)]),e("div",z,u(new Date(s.weatherData.currentTime).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),1),e("div",N,[e("img",{src:`https://openweathermap.org/img/wn/${s.weatherData.current.weather[0].icon}@2x.png`,alt:""},null,8,j)]),e("div",G,[e("div",K,u(Math.round(s.weatherData.current.temp))+" °C",1)]),e("div",J,u(s.weatherData.current.weather[0].description),1),e("div",P,[e("div",{onClick:w}," Last Update "+u(new Date(s.weatherData.currentTime).toLocaleTimeString("en-us",{timeStyle:"short"})),1),A[1]||(A[1]=e("span",null,[e("img",{src:b,alt:"refresh"})],-1))])])])):g("",!0)}}}),t0=C(e0,[["__scopeId","data-v-4324a712"]]),a0={class:"forecast"},s0={class:"hourly-forecast"},o0=["src"],n0={class:"hour-temp"},r0={class:"hour-time"},i0=_({__name:"HourlyForecast",props:{weatherData:{}},setup(m){const i=m,n=Q(()=>{var a;const r=new Date,t=[];if(!((a=i.weatherData)!=null&&a.hourly))return t;for(const h of i.weatherData.hourly)if(!(new Date(h.currentTime)<r))if(t.length<4)t.push(h);else break;return t});return(r,t)=>(o(),l("section",a0,[t[0]||(t[0]=e("div",{class:"forecast-title"},"Hourly Forecast",-1)),e("div",s0,[(o(!0),l(k,null,V(n.value,a=>(o(),l("div",{class:"hourly-item",key:a.dt},[e("img",{src:`https://openweathermap.org/img/wn/${a.weather[0].icon}@2x.png`,alt:""},null,8,o0),e("div",n0,u(Math.round(a.temp))+"°",1),e("div",r0,u(new Date(a.currentTime).toLocaleTimeString("en-us",{timeStyle:"short"})),1)]))),128))])]))}}),c0=C(i0,[["__scopeId","data-v-ee5436f2"]]),l0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABkSURBVHgB7dGxDYAwDETRE2KOKKswCaOyisvsEMUhbHC+jsivtvxlGUhpD7WUuy4QHNSUe8UYjxLhAp85pQgfECOxgBA5oXAHeqdGlQtsXXBZa8aMR38QWh4LCMv5gLg8pZ94AaYJPUCEgLnOAAAAAElFTkSuQmCC",d0={class:"forecast"},u0={class:"weekly-forecast"},h0={class:"weekly-details"},A0={class:"weekly-icon"},g0=["src"],m0={class:"weekly-weather"},p0={class:"day"},w0={class:"weather-weekly"},_0={class:"weekly-temp"},C0={class:"hour-temp"},v0=_({__name:"DailyForecast",props:{weatherData:{}},setup(m){return(i,n)=>{var r;return o(),l("section",d0,[n[1]||(n[1]=e("div",{class:"forecast-title"},"Weekly Forecast",-1)),e("div",u0,[(o(!0),l(k,null,V((r=i.weatherData)==null?void 0:r.daily,t=>(o(),l("div",{class:"weekly-item",key:t.dt},[e("div",h0,[e("div",A0,[e("img",{src:`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,alt:""},null,8,g0)]),e("div",m0,[e("div",p0,u(new Date(t.dt*1e3).toLocaleDateString("en-us",{weekday:"long"})),1),e("div",w0,u(t.weather[0].main),1)])]),e("div",_0,[e("div",C0,u(Math.round(t.temp.day))+"°C",1),n[0]||(n[0]=e("span",null,[e("img",{src:l0,alt:"caret_right"})],-1))])]))),128))])])}}}),f0=C(v0,[["__scopeId","data-v-22e7d1b5"]]),y0=_({__name:"WeatherDetails",setup(m){const i=B(),n=i.query.lat,r=i.query.long,t=W(),a=L(),h=async()=>{const d=`https://api.openweathermap.org/data/3.0/onecall?lat=${n}&lon=${r}&units=metric&&exclude=minutely,&appid=3e4ab56c9ba5a0c2807affcd2226e2a3`;try{t.updateLoadingState(!0);const c=await F.get(d);t.updateLoadingState(!1);const p=new Date().getTimezoneOffset()*6e4,v=c.data.current.dt*1e3+p;c.data.currentTime=v+1e3*c.data.timezone_offset,c.data.hourly.forEach(w=>{const s=w.dt*1e3+p;w.currentTime=s+1e3*c.data.timezone_offset}),c.data.daily.shift(),a.value=c.data}catch(c){console.log(c)}};return x(()=>{h()}),(d,c)=>(o(),l(k,null,[a.value?(o(),D(t0,{key:0,"weather-data":a.value},null,8,["weather-data"])):g("",!0),a.value?(o(),D(c0,{key:1,"weather-data":a.value},null,8,["weather-data"])):g("",!0),a.value?(o(),D(f0,{key:2,"weather-data":a.value},null,8,["weather-data"])):g("",!0)],64))}}),k0=C(y0,[["__scopeId","data-v-d57b494f"]]);export{k0 as default};
